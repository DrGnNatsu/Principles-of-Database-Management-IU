CREATE TABLE airline (
                         airlineid VarChar(9) PRIMARY KEY,
                         airline_name VARCHAR(100)
);

CREATE TABLE airport (
                         airportid VARCHAR(9) PRIMARY KEY,
                         airport_name VARCHAR(100),
                         city VARCHAR(100),
                         country VARCHAR(100)
);

CREATE TABLE seat_class (
                            class_type VARCHAR(50) PRIMARY KEY,
                            base_price DECIMAL(18, 2)
);

CREATE TABLE seat (
                      seat_number Varchar(9) PRIMARY KEY,
                      class_type VARCHAR(50),
                      CONSTRAINT fk_seat_class FOREIGN KEY (class_type) REFERENCES seat_class(class_type) ON DELETE CASCADE
);

CREATE TABLE passenger (
                           passengerid VARCHAR(9) PRIMARY KEY,
                           first_name VARCHAR(50),
                           last_name VARCHAR(50),
                           age INT CHECK (Age >= 0 AND Age <= 120),
                           date_of_birth DATE,
                           nationality VARCHAR(50),
                           passport_number CHAR(9) UNIQUE,
                           email VARCHAR(100),
                           phone_number CHAR(12),
                           address VARCHAR(200)
);

CREATE TABLE employee (
                          employeeid VARCHAR(9) PRIMARY KEY ,
                          first_name VARCHAR(50) not null,
                          last_name VARCHAR(50) not null,
                          gender VARCHAR(1) Not null check (gender in ('M', 'F')),
                          date_of_birth DATE not null,
                          age INT not null check (age >= 18 and age <= 100),
                          role VARCHAR(50) not null,
                          salary DECIMAL(18, 2) not null,
                          address VARCHAR(200) not null,
                          phone_number VARCHAR(15) not null
);

CREATE TABLE booking (
                         bookingid VARCHAR(9) PRIMARY KEY,
                         booking_date DATETIME NOT NULL,
                         payment_status VARCHAR(50) NOT NULL
);

CREATE TABLE airport_staff (
                               airport_staff_id VARCHAR(9) PRIMARY KEY,
                               airportid VARCHAR(9),
                               employeeid VARCHAR(9),
                               status VARCHAR(50) NOT NULL,
                               role VARCHAR(50) NOT NULL,
                               CONSTRAINT fk_airport FOREIGN KEY (airportid) REFERENCES airport(airportid) ON DELETE CASCADE,
                               CONSTRAINT fk_employee FOREIGN KEY (employeeid) REFERENCES employee(employeeid) ON DELETE CASCADE
);

CREATE TABLE gate (
                      gate_number VARCHAR(9) PRIMARY KEY,
                      airportid VARCHAR(9) ,
                      status VARCHAR(50) NOT NULL,
                      CONSTRAINT fk_airport_gate FOREIGN KEY (airportid) REFERENCES airport(airportid) ON DELETE CASCADE
);

CREATE TABLE flight_status (
                               statusid VARCHAR(9) PRIMARY KEY,
                               status VARCHAR(50)
);

CREATE TABLE flight_schedule (
                                 scheduleid VARCHAR(9) PRIMARY KEY,
                                 statusid VARCHAR(9),
                                 departure_date DATETIME NOT NULL,
                                 arrival_date DATETIME NOT NULL,
                                 departure VARCHAR(50) NOT NULL,
                                 arrival VARCHAR(50) NOT NULL,
                                 flight_duration INT NOT NULL,
                                 CONSTRAINT fk_status FOREIGN KEY (statusid) REFERENCES flight_status(statusid) ON DELETE CASCADE
);

CREATE TABLE flight_base (
                             flightid VARCHAR(9) PRIMARY KEY,
                             gate_number VARCHAR(9),
                             airlineid VARCHAR(9),
                             scheduleid VARCHAR(9),
                             CONSTRAINT fk_gate FOREIGN KEY (gate_number) REFERENCES gate(gate_number) ON DELETE CASCADE,
                             CONSTRAINT fk_airline FOREIGN KEY (airlineid) REFERENCES airline(airlineid) ON DELETE CASCADE,
                             CONSTRAINT fk_schedule FOREIGN KEY (scheduleid) REFERENCES flight_schedule(scheduleid) ON DELETE CASCADE
);

CREATE TABLE ticket (
                        ticketid varchar(9) PRIMARY KEY,
                        passengerid varchar(9),
                        seat_number varchar(9),
                        bookingid varchar(9),
                        flightid varchar(9),
                        final_price INT CHECK (Final_price >= 0),
                        baggage_weight INT CHECK (Baggage_weight >= 0),
                        CONSTRAINT fk_passenger FOREIGN KEY (passengerid) REFERENCES passenger(passengerid) ON DELETE CASCADE,
                        CONSTRAINT fk_seat FOREIGN KEY (seat_number) REFERENCES seat(seat_number) ON DELETE CASCADE,
                        CONSTRAINT fk_booking FOREIGN KEY (bookingid) REFERENCES booking(bookingid) ON DELETE CASCADE,
                        CONSTRAINT fk_flight_ticket FOREIGN KEY (flightid) REFERENCES flight_base(flightid) ON DELETE CASCADE
);

CREATE TABLE flight_crew (
                             flight_crew_id VARCHAR(9) PRIMARY KEY,
                             employeeid VARCHAR(9),
                             flightid VARCHAR(9),
                             role VARCHAR(50),
                             status VARCHAR(50),
                             CONSTRAINT fk_employee_crew FOREIGN KEY (employeeid) REFERENCES employee(employeeid) ON DELETE CASCADE,
                             CONSTRAINT fk_flight FOREIGN KEY (flightid) REFERENCES flight_base(flightid) ON DELETE CASCADE
);
